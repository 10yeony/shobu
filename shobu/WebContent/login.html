<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>쇼부 SHOBU</title>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.min.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.8.2/css/all.min.css">
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Handlee|Josefin+Sans:300,600&amp;display=swap">
<style>
body{
  display:-webkit-box;
  display:flex;
  height:100vh;
  min-height:35rem;
  -webkit-box-align:center;
        align-items:center;
  -webkit-box-pack:center;
   justify-content:center;
  font-family:'Josefin Sans', sans-serif;
}


/* .card- 시작 */
.card{
  position:absolute;
  top:50%;
  left:50%;
  width:100%;
  padding-top:1rem;
  padding-bottom:1rem;
  -webkit-transform:translate(-50%,-50%);
	      transform:translate(-50%,-50%);
}

.card-wrap{
  position:relative;
  margin:0 auto;
}

@media (min-width: 769px){
  .card-wrap{
    max-width:450px
  }
}

.card-body{
  display:-webkit-box;
  display:flex;
  -webkit-box-orient:vertical;
  -webkit-box-direction:normal;
         flex-direction:column;
  -webkit-box-align:center;
        align-items:center;
  -webkit-box-pack:center;
   justify-content:center;
  text-align:center;
}

.card-body p{
  font-size:1.1rem;
}

.card-title{
  font-weight:bold;
  font-size:1.8rem;
}/* .card- 끝 */


/* .badge-wrap 시작 */
.badge-wrap{
  display:-webkit-box;
  display:flex;
  -webkit-box-pack:center;
   justify-content:center;
}

.badge-wrap a.badge{
  display:-webkit-box;
  display:flex;
  -webkit-box-align:center;
        align-items:center;
  -webkit-box-pack:center;
   justify-content:center;
  width:2.5rem;
  height:2.5rem;
  margin:0 .2rem;
  padding:0;
  opacity:.7;
  border-radius:50%;
  -webkit-transition:opacity .3s ease-in;
  transition:opacity .3s ease-in;
  font-size:1rem;
  color:#fff;
  text-decoration:none;
  cursor:pointer;
}

.badge-wrap a.badge:hover{
  opacity:1;
  color:#fff;
}/* .badge-wrap 끝 */


/* .btn 시작 */
.btn{
  color:#fff !important;
  width:10em;
  -webkit-transition:all .4s;
  transition:all .4s;
  border-radius:20px;
  border:2px solid transparent;
}

.btn.btn-back{
  position:absolute;
  top:0;
  left:0;
  border-radius:0;
  width:3rem;
  height:3rem;
  font-size:1.5rem;
  border:0;
}

.btn.btn-back:hover{
  border:0 !important;
}/* .btn 끝 */


/* 파일업로드 및 중복 확인 버튼 설정 시작 */
.filebox {
  vertical-align:text-bottom; 
  margin-left:5px;
}

.filebox label, .check  {
  display: inline-block;
  padding: .5em .75em;
  color: #fff;
  font-size: inherit;
  line-height: normal;
  vertical-align: middle;
  background-color: #343D52;
  cursor: pointer;
  border: 1px solid #343D52;
  border-radius: .25em;
  -webkit-transition: background-color 0.2s;
  transition: background-color 0.2s;
}

.filebox label:hover, .check:hover {
  background-color: #fff;
  color: #343D52;
}

.filebox label:active, .check:active {
  background-color: #fff;
  color: #343D52;
}

.filebox input[type="file"] {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  border: 0;
}/* 파일 업로드 및 중복 확인 버튼 설정 끝 */


/* .form-control 시작 */
.form-control{
  font-family:'Handle', cursive;
}

.form-control::-webkit-input-placeholder{
    font-family:'Josefin Sans', sans-serif;
    letter-spacing:.1em;
    font-size:.9rem;
}

.form-control::-moz-placeholder{
    font-family:'Josefin Sans', sans-serif;
    letter-spacing:.1em;
    font-size:.9rem;
}

.form-control:-ms-input-placeholder{
    font-family:'Josefin Sans', sans-serif;
    letter-spacing:.1em;
    font-size:.9rem;
}

.form-control::-ms-input-placeholder{
    font-family:'Josefin Sans', sans-serif;
    letter-spacing:.1em;
    font-size:.9rem;
}

.form-control::placeholder{
    font-family:'Josefin Sans', sans-serif;
    letter-spacing:.1em;
    font-size:.9rem;
}/* .form-control 끝 */


/* card--welcome 시작 */
.card--welcome{
  z-index:3;
}

.card--welcome .card-title{
  color:#343D52;
}

.card--welcome .btn-wrap{
  display:-webkit-box;
  display:flex;
  -webkit-box-orient:vertical;
  -webkit-box-direction:normal;
         flex-direction:column;
}

.card--welcome .btn{
  color:#fff;
  -webkit-transition:all .3s;
  transition:all .3s;
}

.card--welcome .btn:hover{
  background-color:#343D52;
  font-weight:bold;
}

.card--welcome .btn-register, .card--welcome .btn-login{
  margin-bottom:.8em;
  background-color:#343D52;
}

.card--welcome .btn-register:hover{
  color:#343D52;
}
/* card--welcome 끝 */


/* card--register 시작 */
.card--register .card-title{
  color:#343D52;
}

.card--register .badge{
  background-color:#343D52;
}

.card--register .btn{
  background-color:#343D52;
}

.card--register .btn:hover{
  background-color:#fff;
  color:#343D52 !important;
  font-weight:bold;
  border:2px solid #343D52;
}

.card--register .btn:focus{
  box-shadow:0 0 0 0.2rem #343D52;
}

.card--register .form-control{
  color:#343D52;
  border-color:#343D52;
}

.card--register .form-control:focus{
  box-shadow:0 0 0 0.2rem #343D52;
}

.card--register input[name=id], input[name=nickname]{
  display:inline; 
  width:68%; 
  vertical-align:text-bottom;
}

.card--register button.check, #profileImg{
  vertical-align:text-bottom;
}

.card--register button#deleteFile{
  vertical-align:baseline;
}

.card--register #comparePW{
  color:red; 
  text-align:left; 
  margin-top:3px;
}/* card--register 끝 */


/* card--login 시작 */
.card--login .card-title{
  color:#343D52;
}

.card--login .badge{
  background-color:#343D52;
}

.card--login .btn{
  background-color:#343D52;
}

.card--login .btn:hover{
  background-color:#fff;
  color:#343D52 !important;
  font-weight:bold;
  border:2px solid #343D52;
}

.card--login .btn:focus{
  box-shadow:0 0 0 0.2rem #343D52;
}

.card--login .form-control{
  color:#343D52;
  border-color:#343D52;
}

.card--login .form-control:focus{
  box-shadow:0 0 0 0.2rem #343D52;
}/* card--login 끝 */


/* body 시작 */
body{
  background:-webkit-gradient(linear, left top, right top, from(#0b8793), color-stop(#360033), color-stop(#3A6073), to(#16222A));
  background:linear-gradient(to right, #0b8793, #360033, #3A6073, #16222A);
  background-size:500% 500%;
  -webkit-transition:background 3s ease;
  transition:background 3s ease;
  background-position:50% 50%;
}

body.is-register{
  	background-position:0% 50%;
}

body.is-login{
    background-position:100% 50%;
}/* body 끝 */


/* .card 시작 */
.card{
  -webkit-transition:all .3s .1s ease-out;
  transition:all .3s .1s ease-out;
}

.card:not(.is-show){
  opacity:0;
  -webkit-transform:translate(-50%,-50%) rotateX(95deg);
		  transform:translate(-50%,-50%) rotateX(95deg);
	}
	
.card.is-show{
  opacity:1;
  -webkit-transform:translate(-50%,-50%);
		  transform:translate(-50%,-50%);
  z-index:5;
}/* .card 끝 */
</style>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script>
/* JS onload : 로그인 템플릿 컨트롤 시작 */
window.onload = function(){
  const cards = document.querySelectorAll('.card');
  var file = document.getElementById('');

  /* View Controller */
  const btns = document.querySelectorAll('.js-btn');
  btns.forEach(btn => {
    btn.addEventListener('click', on_btn_click, true);
    btn.addEventListener('touch', on_btn_click, true);
  });

  function on_btn_click(e) {
    const nextID = e.currentTarget.getAttribute('data-target');
    const next = document.getElementById(nextID);
    if (!next) return;
    bg_change(nextID);
    view_change(next);
    return false;
  }

  /* class를 body에 추가(배경색 변화) */
  function bg_change(next) {
    document.body.className = '';
    document.body.classList.add('is-' + next);
  }

  /* class를 card에 추가(카드 넘어감) */
  function view_change(next) {
    cards.forEach(card => {card.classList.remove('is-show');});
    next.classList.add('is-show');
  }
}/* JS onload : 로그인 템플릿 컨트롤 끝 */


/* JQurey ready 시작 */
$(function(){
	const regex = /^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[@$!%*?&#*^])[A-Za-z\d@$!%*?&#*^]{4,10}$/;
	//정규표현식(대/소문자,숫자,특수문자 포함하여 4글자 이상)
	var profileImg; //프로필 사진 영역
	var password; //비밀번호 값
	var passwordCheck; //비밀번호 확인 값
	var pwLength; //비밀번호 길이
	
	$("#profile").on("change", handleImgFileSelect); //이미지 파일 업로드시 함수 호출
	
	$("#deleteFile").click(function(){
		var flag = confirm("프로필 사진을 삭제하시겠습니까?");
		if(!flag){
			return;
		}else{
			$('#profileImg').attr('src', 'image/profile/default.png');
			$('#profile').val('');
		}
	});
	
	
	/* 아이디 중복 확인 */
	$('button:eq(0)').click(function(){
		var id = $(this).siblings('input').val();
		var idCheck = $('input[type=hidden]:eq(0)');
		if(id==''){
			alert("아이디를 입력하세요");
		}else{
			$.ajax({
				//요청
				type: "post", 
				url: "idCheck.do", 
				data: "id="+id,
				
				//응답
				success:function(data){ 
					if(!data){
						alert("사용 가능한 아이디입니다");
						idCheck.attr('value', 'idCheck');
					}else{
						alert("이미 존재하는 아이디입니다");
						$('button:eq(0)').siblings('input').val("").focus();
						idCheck.attr('value', 'notIdCheck');
					}
				}//callback
			});//ajax
		}//click
	});
	
	/* 닉네임 중복 확인 */
	$('button:eq(1)').click(function(){
		var nickname = $(this).siblings('input').val();
		var nicknameCheck = $('input[type=hidden]:eq(1)');
		if(nickname==''){
			alert("닉네임을 입력하세요");
		}else{
			$.ajax({
				//요청
				type: "post", 
				url: "nicknameCheck.do", 
				data: "nickname="+nickname,
				
				//응답
				success:function(data){ 
					if(!data){
						alert("사용 가능한 닉네임입니다");
						nicknameCheck.attr('value', 'nicknameCheck');
					}else{
						alert("이미 존재하는 닉네임입니다");
						$('button:eq(1)').siblings('input').val("").focus();
						nicknameCheck.attr('value', 'notNicknameCheck');
					}
				}//callback
			});//ajax
		}//click
	});
	
	/* 비밀번호 형식 체크 */
	$('input[type=password]').keyup(function(){
		pwLength = $('input[name=password]').val().length;
		pwCheckLength = $('input[name=passwordCheck]').val().length;
		password = $('input[name=password]').val();
		passwordCheck = $('input[name=passwordCheck]').val();
		
		if(pwLength<1){
			$('#comparePW').text('비밀번호를 입력하세요');
		}else if(pwLength<4){
			$('#comparePW').text('4자 이상 10자 이하로 입력하세요');
		}else if(!regex.test(password)){
			$('#comparePW').text('대/소문자, 숫자, 특수문자를 포함하세요');
		}else if(pwCheckLength>0 && password!=passwordCheck){
			$('#comparePW').text('입력하신 비밀번호와 다릅니다');
		}else{
			$('#comparePW').text(' ');
		}
	});
	
	/* 제출 전 아이디 및 닉네임 중복 확인 여부 & 비밀번호 일치 여부 체크 */
	$('form:eq(0)').submit(function(){
		var idCheck = $('input[type=hidden]:eq(0)').val();
		var nicknameCheck = $('input[type=hidden]:eq(1)').val();
		password = $('input[name=password]').val();
		passwordCheck = $('input[name=passwordCheck]').val();
		if(idCheck=="notIdCheck"){
			alert("아이디 중복 확인을 해주세요");
			return false;
		}else if(nicknameCheck=="notNicknameCheck"){
			alert("닉네임 중복 확인을 해주세요");
			return false;
		}else if(password!=passwordCheck){
			alert("입력하신 비밀번호가 다릅니다");
			return false;
		}else if(pwLength<4 || pwLength>10){
			alert("비밀번호를 4자 이상 10자 이하로 입력하세요");
			return false;
		}else if(!regex.test(password)){
			alert("비밀번호에 대/소문자, 숫자, 특수문자를 포함하세요");
			return false;
		}
	});
	
});/* JQurey ready 끝 */


/* 이미지 업로드 핸들러 함수 시작 */
function handleImgFileSelect(e) {
  var files = e.target.files;
  var filesArr = Array.prototype.slice.call(files);
    
  if($('input[type=file]').val() != ""){
    filesArr.forEach(function(f) {
    	
      /* 확장자 제한 */
      if(!f.type.match("image.*")) {
        alert("확장자는 이미지 확장자만 가능합니다.");
        $('#profile').val("");
        return false;
      }
    	
      /* 용량 제한 */
      var fileSize = document.getElementById('profile').files[0].size;
      var maxSize = 5 * 1024 * 1000;
      if(fileSize > maxSize){
        alert("파일용량 5MB을 초과했습니다.");
        $('#profile').val("");
        return false;
      }
		
      /* 업로드 이미지 미리보기 */
      profileImg = f;
      var reader = new FileReader();
      reader.onload = function(e) {
        $("#profileImg").attr("src", e.target.result);
      }
      reader.readAsDataURL(f);
    });//forEach
  }//if
}/* 이미지 업로드 핸들러 함수 끝 */
</script>
</head>
<body>
<div class="container">
  <div class="card-wrap">
    <div class="card border-0 shadow card--welcome is-show" id="welcome">
      <div class="card-body">
        <h2 class="card-title">WELCOME</h2>
        <p>쇼부에 오신 것을 환영합니다.</p>
        <div class="btn-wrap">
          <a class="btn btn-lg btn-register js-btn" data-target="register">회원 가입</a>
          <a class="btn btn-lg btn-login js-btn" data-target="login">로그인</a>
          <a class="btn btn-lg btn-login js-btn" href="index.jsp">메인</a>
        </div>
      </div>
    </div>
    <div class="card border-0 shadow card--register" id="register">
      <div class="card-body">
        <h2 class="card-title">회원 가입</h2>
        <p class="card-text">아래의 내용을 입력해주세요.</p>
        <form method="post" enctype="multipart/form-data" action="register.do" autocomplete="off">
          <div class="form-group">
            <input class="form-control" type="text" name="id" placeholder="아이디" required="required"/>
            <button type="button" class="check">중복 확인</button>
          </div>
          <div class="form-group">
            <input class="form-control" type="text" name="nickname" placeholder="닉네임" required="required"/>
            <button type="button" class="check">중복 확인</button>
          </div>
          <div class="form-group">
            <input class="form-control" type="password" name="password" placeholder="비밀번호" required="required" maxlength="10"/>
          </div>
          <div class="form-group">
            <input class="form-control" type="password" name="passwordCheck" placeholder="비밀번호 확인" required="required" maxlength="10"/>
            <div id="comparePW"></div>
          </div>
          <div class="form-group">
          	<img width="80px" height="80px" src="image/profile/default.png" id="profileImg">
          	<span class="filebox">
              <label for="profile">프로필 사진 업로드</label>
              <input type="file" name="profile" id="profile" accept="image/gif, image/jpeg, image/png">
              <button type="button" class="check" id="deleteFile">삭제</button>
            </span>
          </div>
          <input type="hidden" value="notIdCheck">
          <input type="hidden" value="notNicknameCheck">
          <button type="submit" class="btn btn-lg">등록</button>
        </form>
      </div>
      <button class="btn btn-back js-btn" data-target="welcome"><i class="fas fa-angle-left"></i></button>
    </div>
    <div class="card border-0 shadow card--login" id="login">
      <div class="card-body">
        <h2 class="card-title">Welcome Back!</h2>
        <p>로그인 해주세요.</p>
        <form method="post" action="login.do" autocomplete="off">
          <div class="form-group">
            <input class="form-control" type="text" name="id" placeholder="아이디" required="required"/>
          </div>
          <div class="form-group">
            <input class="form-control" type="password" name="password" placeholder="비밀번호" required="required"/>
          </div>
          <p></p>
          <button type="submit" class="btn btn-lg">로그인</button>
        </form>
      </div>
      <button class="btn btn-back js-btn" data-target="welcome"><i class="fas fa-angle-left"></i></button>
    </div>
  </div>
</div>
</body>
</html>